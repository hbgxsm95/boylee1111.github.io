<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Kruskal——Networking &#8211; Boyi Li</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Networking problem with kruskal algorithm">
    <meta name="author" content="John Otander">
    <meta name="keywords" content="development">
    <link rel="canonical" href="http://boylee.me/development/2013/04/29/kruskal-networking/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    

    <link rel="stylesheet" href="/css/boylee.css" type="text/css">

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: { inlineMath: [['$','$'], ['\\(','\\)'], ['[latex]','[/latex]']] },
            menuSettings: {
                zoom: "Double-Click",
                zscale: "200%"
            },
            showProcessingMessages: false,
            showMathMenu: false,
            showMathMenuMSIE: false,
            messageStyle: "none"
        });
    </script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="/javascripts/main.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Kruskal——Networking">
    <meta property="og:description" content="A simple, beautiful theme for Jekyll that emphasizes content rather than aesthetic fluff.">
    <meta property="og:url" content="http://boylee.me/development/2013/04/29/kruskal-networking/">
    <meta property="og:site_name" content="Boyi Li">
</head>

<body class="animated fade-in-down">
  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://boylee.me" class="site-title">Boyi Li</a>
      <nav class="site-nav right">
        <a href="/categories/">Categories</a>
<a href="/tags/">Tags</a>
<a href="/about/">About</a>

      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="left">
    
      <a class="fa fa-github-alt" href="https://github.com/boylee1111"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-envelope mailTo" href="#It's My Fucking Email!^_^"></a>
    
    
      <a class="fa fa-linkedin-square" href="https://www.linkedin.com/in/boylee"></a>
    
  </div>
  <div class="right">
    
      <a class="fa fa fa-weibo", href="http://www.weibo.com/boylee1111"></a>
    
    
      <a class="fa fa-facebook-square", href="https://facebook.com/boylee1111"></a>
    
    
      <a class="fa fa-twitter" href="https://twitter.com/boylee1111"></a>
    
    
      <a class="fa fa-instagram" href="https://instagram.com/boylee1111"></a>
    
    
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Kruskal——Networking</h1>
  <div>
    <span class="post-meta">Apr 29, 2013</span><br>
    
    <span class="post-meta small">6 minute read</span>
  </div>
</div>

<div class="bl-separator"></div>

<article class="post-content">
  <h3 id="networking">Networking</h3>

<p><strong>Description</strong></p>

<p>You are assigned to design network connections between certain points in a wide area. You are given a set of points in the area, and a set of possible routes for the cables that may connect pairs of points. For each possible route between two points, you are given the length of the cable that is needed to connect the points over that route. Note that there may exist many possible routes between two given points. It is assumed that the given possible routes connect (directly or indirectly) each two points in the area.</p>

<p>Your task is to design the network for the area, so that there is a connection (direct or indirect) between every two points (i.e., all the points are interconnected, but not necessarily by a direct cable), and that the total length of the used cable is minimal.</p>

<p><strong>Input</strong></p>

<p>The input file consists of a number of data sets. Each data set defines one required network. The first line of the set contains two integers: the first defines the number P of the given points, and the second the number R of given routes between the points. The following R lines define the given routes between the points, each giving three integer numbers: the first two numbers identify the points, and the third gives the length of the route. The numbers are separated with white spaces. A data set giving only one number P=0 denotes the end of the input. The data sets are separated with an empty line.</p>

<p>The maximal number of points is 50. The maximal length of a given route is 100. The number of possible routes is unlimited. The nodes are identified with integers between 1 and P (inclusive). The routes between two points i and j may be given as i j or as j i.</p>

<p><strong>Output</strong></p>

<p>For each data set, print one number on a separate line that gives the total length of the cable used for the entire designed network.</p>

<p>Sample Input</p>

<p><code>1 0</code></p>

<p><code>2 3</code></p>

<p><code>1 2 37</code></p>

<p><code>2 1 17</code></p>

<p><code>1 2 68</code></p>

<p><code>3 7</code></p>

<p><code>1 2 19</code></p>

<p><code>2 3 11</code></p>

<p><code>3 1 7</code></p>

<p><code>1 3 5</code></p>

<p><code>2 3 89</code></p>

<p><code>3 1 91</code></p>

<p><code>1 2 32</code></p>

<p><code>5 7</code></p>

<p><code>1 2 5</code></p>

<p><code>2 3 7</code></p>

<p><code>2 4 8</code></p>

<p><code>4 5 11</code></p>

<p><code>3 5 10</code></p>

<p><code>1 5 6</code></p>

<p><code>4 2 12</code></p>

<p><code>0</code></p>

<p>Sample Output</p>

<p><code>0 17 16 26 </code></p>

<p>Kruskal最小生成树。思路是首先各个点各自所属一个集合，然后按顺序排列权值，从最小的边开始，如果这条边连接的两个点不在一个集合，就取并，直至遍历了所有边。其中采用了并查集的方式，确定点是否在一个集合中。Kruskal算法同的Prim基本思想都是贪心，只不过Kruskal从边开始，Prim从点开始。对于本题，最开始一直是Rumtime Error，很郁闷，之后仔细看了下题，发现所给数据中可能有重复给两个点之间的权值，所以开的数组n有点小了，只有55，导致在运行时越界了，最后发现后将n数组大小改为10000然后AC了。代码如下：</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="lineno"> 1</span> <span class="cp">#include &lt;stdio.h&gt;</span>
<span class="lineno"> 2</span> <span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="lineno"> 3</span> <span class="cp">#include &lt;string.h&gt;</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="c1">// Note: 题目中一对点可能有多组数据，所以数组尽量开大一些！！Runtime Error的原因。</span>
<span class="lineno"> 6</span> <span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">res</span><span class="p">;</span>
<span class="lineno"> 7</span> <span class="kt">int</span> <span class="n">father</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="k">typedef</span> <span class="k">struct</span> <span class="n">node</span> <span class="p">{</span>
<span class="lineno">10</span> <span class="err">    </span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">;</span>
<span class="lineno">11</span> <span class="p">}</span> <span class="n">Node</span><span class="p">;</span>
<span class="lineno">12</span> 
<span class="lineno">13</span> <span class="n">Node</span> <span class="n">n</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="lineno">14</span> 
<span class="lineno">15</span> <span class="kt">int</span> <span class="nf">getF</span><span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span>
<span class="lineno">16</span> <span class="p">{</span>
<span class="lineno">17</span> <span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="n">father</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">)</span> <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
<span class="lineno">18</span> <span class="err">    </span><span class="k">else</span>
<span class="lineno">19</span> <span class="err">    </span><span class="p">{</span>
<span class="lineno">20</span> <span class="err">        </span><span class="n">father</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">getF</span><span class="p">(</span><span class="n">father</span><span class="p">[</span><span class="n">v</span><span class="p">]);</span>
<span class="lineno">21</span> <span class="err">        </span><span class="k">return</span> <span class="n">father</span><span class="p">[</span><span class="n">v</span><span class="p">];</span>
<span class="lineno">22</span> <span class="err">    </span><span class="p">}</span>
<span class="lineno">23</span> <span class="p">}</span>
<span class="lineno">24</span> 
<span class="lineno">25</span> <span class="kt">int</span> <span class="nf">Union</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="lineno">26</span> <span class="p">{</span>
<span class="lineno">27</span> <span class="err">    </span><span class="kt">int</span> <span class="n">fa</span> <span class="o">=</span> <span class="n">getF</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="lineno">28</span> <span class="err">    </span><span class="kt">int</span> <span class="n">fb</span> <span class="o">=</span> <span class="n">getF</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="lineno">29</span> <span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="n">fa</span> <span class="o">!=</span> <span class="n">fb</span><span class="p">)</span>
<span class="lineno">30</span> <span class="err">    </span><span class="p">{</span>
<span class="lineno">31</span> <span class="err">        </span><span class="n">father</span><span class="p">[</span><span class="n">fa</span><span class="p">]</span> <span class="o">=</span> <span class="n">fb</span><span class="p">;</span>
<span class="lineno">32</span> <span class="err">        </span><span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">33</span> <span class="err">    </span><span class="p">}</span>
<span class="lineno">34</span> <span class="err">    </span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">35</span> <span class="p">}</span>
<span class="lineno">36</span> 
<span class="lineno">37</span> <span class="kt">int</span> <span class="nf">compare</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="lineno">38</span> <span class="p">{</span>
<span class="lineno">39</span> <span class="err">    </span><span class="n">Node</span> <span class="n">arg1</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="p">)(</span><span class="n">a</span><span class="p">);</span>
<span class="lineno">40</span> <span class="err">    </span><span class="n">Node</span> <span class="n">arg2</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="p">)(</span><span class="n">b</span><span class="p">);</span>
<span class="lineno">41</span> <span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="n">arg1</span><span class="p">.</span><span class="n">w</span> <span class="o">&gt;</span> <span class="n">arg2</span><span class="p">.</span><span class="n">w</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">42</span> <span class="err">    </span><span class="k">if</span> <span class="p">(</span><span class="n">arg1</span><span class="p">.</span><span class="n">w</span> <span class="o">&lt;</span> <span class="n">arg2</span><span class="p">.</span><span class="n">w</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="lineno">43</span> <span class="err">    </span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">44</span> <span class="p">}</span>
<span class="lineno">45</span> 
<span class="lineno">46</span> <span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
<span class="lineno">47</span> <span class="p">{</span>
<span class="lineno">48</span> <span class="err">    </span><span class="k">while</span> <span class="p">(</span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">49</span> <span class="err">        </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">);</span>
<span class="lineno">50</span> <span class="err">        </span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="lineno">51</span> <span class="err">        </span><span class="p">{</span>
<span class="lineno">52</span> <span class="err">            </span><span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d%d%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">b</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">w</span><span class="p">);</span>
<span class="lineno">53</span> <span class="err">            </span><span class="n">father</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="lineno">54</span> <span class="err">        </span><span class="p">}</span>
<span class="lineno">55</span> <span class="err">        </span><span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">56</span> <span class="err">        </span><span class="n">qsort</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">Node</span><span class="p">),</span> <span class="n">compare</span><span class="p">);</span> <span class="c1">// 权值递增</span>
<span class="lineno">57</span> <span class="err">        </span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="lineno">58</span> <span class="err">            </span><span class="k">if</span> <span class="p">(</span><span class="n">Union</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">b</span><span class="p">))</span> <span class="c1">// 若a、b不在一个集合，连接</span>
<span class="lineno">59</span> <span class="err">                </span><span class="n">res</span> <span class="o">+=</span> <span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">w</span><span class="p">;</span>
<span class="lineno">60</span> <span class="err">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">res</span><span class="p">);</span>
<span class="lineno">61</span> <span class="err">    </span><span class="p">}</span>
<span class="lineno">62</span> <span class="err">    </span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">63</span> <span class="p">}</span></code></pre></div>

</article>



<div class="bl-post-tags">
  
  
  
    
      
      
        <a href="/tags/#algorithm" class="bl-tag">
         algorithm
        </a>
      
    
      
      
    
      
      
    
      
      
    
  
    
      
      
    
      
      
        <a href="/tags/#c" class="bl-tag">
         c
        </a>
      
    
      
      
    
      
      
    
  
    
      
      
    
      
      
    
      
      
        <a href="/tags/#graph" class="bl-tag">
         graph
        </a>
      
    
      
      
    
  
    
      
      
    
      
      
    
      
      
    
      
      
        <a href="/tags/#kruskal" class="bl-tag">
         kruskal
        </a>
      
    
  
</div>

<h3 class="comments-title">Comments</h3>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'boylee1111githubio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


  <h3 class="related-post-title">Related Posts</h3>
  
    <div class="post ml2">
      <a href="/development/2014/11/22/.Net-Choose-A-Right-Generic-Collection/" class="post-link">
        <h4 class="post-title">.NET -- Choose A Right Generic Collection</h4>
        <p class="post-summary">While adding <strong>Tags</strong> pages, I was stuck owing to the order of tags. Here are two different approaching of how to sort tags...</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/20/Tips-For-Sorting-Tags-In-GitHub-Page-With-Jekyll/" class="post-link">
        <h4 class="post-title">Tips For Sorting Tags In GitHub Page With Jekyll</h4>
        <p class="post-summary">While adding <strong>Tags</strong> pages, I was stuck owing to the order of tags. Here are two different approaching of how to sort tags...</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/17/Custom-MathJax-to-Solve-LaTeX-Legacy-Tag-Problem/" class="post-link">
        <h4 class="post-title">Custom MathJax to Solve LaTeX Legacy Tag Problem</h4>
        <p class="post-summary">After I migrated my blog from WordPress to Github Page, I chooose MathJax as rendering engine.</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/miscellaneous/2014/11/16/%E4%BB%8EWordPress%E5%88%B0Github-Pages/" class="post-link">
        <h4 class="post-title">从WordPress到Github Pages</h4>
        <p class="post-summary">因为买的Web Hosting要到期了，这才想起来赶紧把Blog移过来。</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/14/leetcode-reverse-nodes-in-k-group/" class="post-link">
        <h4 class="post-title">[LeetCode] Reverse Nodes in k-Group</h4>
        <p class="post-summary">Advance version of Reverse Linked List II.</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/14/leetcode-reverse-linked-list-ii/" class="post-link">
        <h4 class="post-title">[LeetCode] Reverse Linked List II</h4>
        <p class="post-summary">Reverse a linked list in a range. There are two steps to achieve this goal ...</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/14/leetcode-candy/" class="post-link">
        <h4 class="post-title">[LeetCode] Candy</h4>
        <p class="post-summary">分糖果问题，每个小孩有一个分数，要求对任意一个小孩，如果他的分数比相邻的小孩高，那么他必须分到比相邻小孩要多的糖果。并且每个小孩只要分到一个。</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/14/leetcode-restore-ip-addresses/" class="post-link">
        <h4 class="post-title">[LeetCode] Restore IP Addresses</h4>
        <p class="post-summary">恢复字符串所有可能的IP地址，可以回溯或者直接字符串处理。</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/14/leetcode-evaluate-reverse-polish-notation/" class="post-link">
        <h4 class="post-title">[LeetCode] Evaluate Reverse Polish Notation</h4>
        <p class="post-summary">计算逆波兰表达式，比直接计算表达式还要简单，少了转化为逆波兰表达式的过程，也不需要handle表达式异常的情况。</p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/development/2014/11/13/leetcode-partition-list/" class="post-link">
        <h4 class="post-title">[LeetCode] Partition List</h4>
        <p class="post-summary">分割链表，将比指定值小的都移动到链表前部分，大的移动到后部分。</p>
      </a>
    </div>
  

        
      </div>
    </div>    
  </div>
  <footer class="footer">
  <div class="p2 wrap">
    <div class="measure mt1 center">
      <small>Copyright &copy; 2014 Boyi Li.</small><br>
      <small>
        Thanks to <a href="http://johnotander.com" target="_blank">John Otander</a> (<a href="https://twitter.com/4lpine" target="_blank">@4lpine</a>) and <a href="http://jekyllrb.com" target="_blank">Jekyll</a>.
      </small>
    </div>
  </div>
</footer>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'true', 'auto');
ga('send', 'pageview');

</script>


</body>
</html>
